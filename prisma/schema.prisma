generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Telegram + –∫–æ—à–µ–ª—å–∫–∏)
model User {
  id                String    @id @default(cuid())
  telegramId        String?   @unique
  telegramUsername  String?
  telegramPhotoUrl  String?
  telegramFirstName String?
  telegramAuthDate  DateTime?
  username          String?
  plan              Plan      @default(FREE)
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  wallets          Wallet[]
  projects         Project[]
  aiGenerations    AiGeneration[]
  comments         Comment[]
  reactions        Reaction[]
  commentReactions CommentReaction[]
  locks            Lock[]
  payments         PlatformPayment[]
  rewards          RewardEvent[]
  proposals        Proposal[]
  votes            Vote[]

  @@map("users")
}

// –ö–æ—à–µ–ª—å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–¥–∏–Ω User -> –º–Ω–æ–≥–æ Wallet)
model Wallet {
  id              String    @id @default(cuid())
  userId          String
  user            User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  address         String    @unique  // axm1... lowercase
  label           String?
  isPrimary       Boolean   @default(false)
  verifiedAt      DateTime  @default(now())
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([userId])
  @@map("wallets")
}

enum Plan {
  FREE
  PRO
}

// –ü—Ä–æ–µ–∫—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤
model Project {
  id               String        @id @default(cuid())
  ownerId          String
  owner            User          @relation(fields: [ownerId], references: [id])
  creatorWallet    String?       // Which wallet was used to create this project

  tokenAddress     String?       @unique
  name             String
  ticker           String
  logo             String?

  descriptionShort String?
  descriptionLong  String?       @db.Text

  // JSON –ø–æ–ª—è
  links            Json?         // { telegram, twitter, website, discord }
  tokenomics       Json?         // { supply, distribution, vesting, tax }
  launchPlan       Json?         // –ø–ª–∞–Ω –∑–∞–ø—É—Å–∫–∞
  faq              Json?         // –≤–æ–ø—Ä–æ—Å—ã-–æ—Ç–≤–µ—Ç—ã
  promoTexts       Json?         // —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ–≤

  // CW20 Token Parameters
  decimals            Int           @default(6)
  initialSupply       String?

  status              ProjectStatus @default(DRAFT)
  isFeatured          Boolean       @default(false)
  isVerified          Boolean       @default(false)

  // Launch dates
  presaleStartDate    DateTime?
  presaleEndDate      DateTime?
  estimatedLaunchDate DateTime?

  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt

  metrics          TokenMetric[]
  riskFlags        RiskFlag[]
  comments         Comment[]
  reactions        Reaction[]
  trustScore       TrustScore?
  changes          ProjectChange[]

  @@map("projects")
}

enum ProjectStatus {
  DRAFT      // –ß–µ—Ä–Ω–æ–≤–∏–∫, –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä—É
  UPCOMING   // –°–∫–æ—Ä–æ –∑–∞–ø—É—Å–∫, –≤–∏–¥–µ–Ω –≤—Å–µ–º –≤ Upcoming
  PRESALE    // –ü—Ä–µ—Å–µ–π–ª –∞–∫—Ç–∏–≤–µ–Ω
  PUBLISHED  // –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω (legacy)
  LAUNCHED   // –¢–æ–∫–µ–Ω —Å–æ–∑–¥–∞–Ω –≤ –±–ª–æ–∫—á–µ–π–Ω–µ
  ARCHIVED
}

// –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
model TokenMetric {
  id              String   @id @default(cuid())
  projectId       String
  project         Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  date            DateTime @db.Date
  txCount         Int      @default(0)
  volumeEstimate  Float    @default(0)
  holdersEstimate Int      @default(0)
  priceUsd        Float?

  createdAt       DateTime @default(now())

  @@unique([projectId, date])
  @@map("token_metrics")
}

// –§–ª–∞–≥–∏ —Ä–∏—Å–∫–∞ –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
model RiskFlag {
  id        String       @id @default(cuid())
  projectId String
  project   Project      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  flagType  RiskFlagType
  severity  Severity     @default(MEDIUM)
  details   Json?
  isActive  Boolean      @default(true)

  createdAt DateTime     @default(now())

  @@map("risk_flags")
}

enum RiskFlagType {
  TOO_NEW              // —Å–ª–∏—à–∫–æ–º –Ω–æ–≤—ã–π
  NO_SOCIALS           // –Ω–µ—Ç —Å–æ—Ü—Å–µ—Ç–µ–π
  HIGH_CONCENTRATION   // –≤—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è —É —Ç–æ–ø-—Ö–æ–ª–¥–µ—Ä–æ–≤
  LOW_LIQUIDITY        // –Ω–∏–∑–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
  SUDDEN_PUMP          // —Ä–µ–∑–∫–∏–π –ø–∞–º–ø
  SUDDEN_DUMP          // —Ä–µ–∑–∫–∏–π –¥–∞–º–ø
  HONEYPOT_SUSPECT     // –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ honeypot
  UNLOCKED_SUPPLY      // –Ω–µ–∑–∞–ª–æ—á–µ–Ω–Ω—ã–π supply
}

enum Severity {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

// AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ª–∏–º–∏—Ç–æ–≤)
model AiGeneration {
  id         String           @id @default(cuid())
  userId     String
  user       User             @relation(fields: [userId], references: [id])

  type       AiGenerationType
  promptHash String           // –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
  input      Json             // –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  result     Json             // —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  model      String           // –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å

  createdAt  DateTime         @default(now())

  @@index([promptHash])
  @@map("ai_generations")
}

enum AiGenerationType {
  TOKENOMICS
  DESCRIPTION
  FAQ
  LAUNCH_PLAN
  PROMO
  FULL_PACKAGE
}

// –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∞–ª–µ—Ä—Ç—ã (–¥–ª—è –±–æ—Ç–∞)
model AlertSubscription {
  id            String    @id @default(cuid())
  telegramId    String

  alertType     AlertType
  tokenAddress  String?   // –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω
  isActive      Boolean   @default(true)

  createdAt     DateTime  @default(now())

  @@unique([telegramId, alertType, tokenAddress])
  @@map("alert_subscriptions")
}

enum AlertType {
  NEW_TOKEN
  VOLUME_SPIKE
  PRICE_CHANGE
  RISK_FLAG
  TOKEN_UPDATE
}

// –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
model Comment {
  id        String            @id @default(cuid())
  projectId String
  project   Project           @relation(fields: [projectId], references: [id], onDelete: Cascade)
  userId    String
  user      User              @relation(fields: [userId], references: [id])
  content   String            @db.Text
  isEdited  Boolean           @default(false)
  createdAt DateTime          @default(now())
  updatedAt DateTime          @updatedAt
  reactions CommentReaction[]

  @@index([projectId, createdAt])
  @@map("comments")
}

// –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
model CommentReaction {
  id        String              @id @default(cuid())
  commentId String
  comment   Comment             @relation(fields: [commentId], references: [id], onDelete: Cascade)
  userId    String
  user      User                @relation(fields: [userId], references: [id])
  type      CommentReactionType
  createdAt DateTime            @default(now())

  @@unique([commentId, userId, type])
  @@index([commentId])
  @@map("comment_reactions")
}

enum CommentReactionType {
  LIKE    // üëç
  DISLIKE // üëé
  LAUGH   // üòÇ
  LOVE    // ‚ù§Ô∏è
}

// –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç—ã
model Reaction {
  id        String       @id @default(cuid())
  projectId String
  project   Project      @relation(fields: [projectId], references: [id], onDelete: Cascade)
  userId    String
  user      User         @relation(fields: [userId], references: [id])
  type      ReactionType
  createdAt DateTime     @default(now())

  @@unique([projectId, userId, type])
  @@index([projectId])
  @@map("reactions")
}

enum ReactionType {
  ROCKET   // üöÄ
  FIRE     // üî•
  HEART    // ‚ù§Ô∏è
  EYES     // üëÄ
  WARNING  // ‚ö†Ô∏è
}

// –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ LAUNCH (—Ç–∏—Ä—ã –¥–æ—Å—Ç—É–ø–∞)
model Lock {
  id              String     @id @default(cuid())
  userId          String
  user            User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  walletAddress   String     // –ö–æ—à–µ–ª—ë–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –¥–µ—Ä–∂–∞—Ç—Å—è —Ç–æ–∫–µ–Ω—ã

  amount          String     // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ LAUNCH (–≤ micro units, 6 decimals)
  tier            LockTier   // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ amount + durationDays
  durationDays    Int        // –°—Ä–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ –¥–Ω—è—Ö
  lockStartDate   DateTime   @default(now())
  lockEndDate     DateTime   // –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å

  status          LockStatus @default(ACTIVE)

  // On-chain –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
  lastVerifiedAt  DateTime?  // –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ on-chain

  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt

  @@index([userId])
  @@index([walletAddress])
  @@index([status])
  @@map("locks")
}

enum LockTier {
  EXPLORER  // 100 LAUNCH, 7 –¥–Ω–µ–π
  BUILDER   // 1,000 LAUNCH, 30 –¥–Ω–µ–π
  FOUNDER   // 10,000 LAUNCH, 90 –¥–Ω–µ–π
  GOVERNOR  // 100,000 LAUNCH, 180 –¥–Ω–µ–π
}

enum LockStatus {
  ACTIVE    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
  EXPIRED   // –°—Ä–æ–∫ –∏—Å—Ç—ë–∫, –æ–∂–∏–¥–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  UNLOCKED  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª
  VIOLATED  // –ë–∞–ª–∞–Ω—Å on-chain —É–ø–∞–ª –Ω–∏–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—É–º–º—ã
}

// Trust Score ‚Äî –º–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –¥–æ–≤–µ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
model TrustScore {
  id                String      @id @default(cuid())
  projectId         String      @unique
  project           Project     @relation(fields: [projectId], references: [id], onDelete: Cascade)

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (0-100)
  verificationScore Int         @default(0)  // –°—Å—ã–ª–∫–∏, —Å–æ—Ü—Å–µ—Ç–∏, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
  liquidityScore    Int         @default(0)  // –†–∞–∑–º–µ—Ä –ø—É–ª–∞, locked LP
  holderScore       Int         @default(0)  // –ö–æ–ª-–≤–æ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–æ–ª–¥–µ—Ä–æ–≤
  activityScore     Int         @default(0)  // –û–±—ä—ë–º—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  contractScore     Int         @default(0)  // –†–∏—Å–∫-—Ñ–ª–∞–≥–∏, –∞—É–¥–∏—Ç
  communityScore    Int         @default(0)  // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Ä–µ–∞–∫—Ü–∏–∏, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

  // –ò—Ç–æ–≥–æ
  totalScore        Int         @default(0)  // –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ (0-100)
  rating            TrustRating @default(F)  // –ë—É–∫–≤–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

  calculatedAt      DateTime    @default(now())
  updatedAt         DateTime    @updatedAt

  @@map("trust_scores")
}

enum TrustRating {
  A  // 80-100 ‚Äî –û—Ç–ª–∏—á–Ω—ã–π
  B  // 60-79  ‚Äî –•–æ—Ä–æ—à–∏–π
  C  // 40-59  ‚Äî –°—Ä–µ–¥–Ω–∏–π
  D  // 20-39  ‚Äî –ù–∏–∑–∫–∏–π
  F  // 0-19   ‚Äî –û–ø–∞—Å–Ω—ã–π
}

// –ü–ª–∞—Ç–µ–∂–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ (–ø–æ–¥–ø–∏—Å–∫–∏, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø—Ä–æ–º–æ)
model PlatformPayment {
  id          String        @id @default(cuid())
  userId      String
  user        User          @relation(fields: [userId], references: [id], onDelete: Cascade)

  type        PaymentType
  amount      String        // –°—É–º–º–∞ –≤ LAUNCH (micro units)
  txHash      String?       // –•—ç—à —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ on-chain
  status      PaymentStatus @default(PENDING)

  // –î–ª—è –ø–æ–¥–ø–∏—Å–æ–∫: –¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è
  expiresAt   DateTime?
  projectId   String?       // –î–ª—è PROJECT_VERIFICATION / PROJECT_PROMOTION

  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  @@index([userId])
  @@index([txHash])
  @@index([status])
  @@map("platform_payments")
}

enum PaymentType {
  PRO_SUBSCRIPTION        // –ü–æ–¥–ø–∏—Å–∫–∞ PRO
  PROJECT_VERIFICATION    // –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
  PROJECT_PROMOTION       // –ü—Ä–æ–º–æ –ø—Ä–æ–µ–∫—Ç–∞
}

enum PaymentStatus {
  PENDING     // –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã
  CONFIRMED   // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ on-chain
  EXPIRED     // –ò—Å—Ç–µ–∫–ª–∞ (–Ω–µ –æ–ø–ª–∞—á–µ–Ω–∞)
}

// –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–æ–≤ (–¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏)
model ProjectChange {
  id          String   @id @default(cuid())
  projectId   String
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  userId      String?  // –ö—Ç–æ –≤–Ω—ë—Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ (null = system)

  changeType  String   // name, description, links, logo, tokenomics, status, etc.
  oldValue    Json?    // –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  newValue    Json?    // –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

  createdAt   DateTime @default(now())

  @@index([projectId, createdAt])
  @@map("project_changes")
}

// –î–æ—Å—Ç–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
model AlertDelivery {
  id              String   @id @default(cuid())
  subscriptionId  String
  alertType       String   // NEW_TOKEN, VOLUME_SPIKE, PRICE_CHANGE, RISK_FLAG
  telegramId      String
  message         String   @db.Text
  deliveredAt     DateTime @default(now())

  @@index([telegramId])
  @@index([alertType])
  @@map("alert_deliveries")
}

// –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –≤–∫–ª–∞–¥ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
model RewardEvent {
  id          String       @id @default(cuid())
  userId      String
  user        User         @relation(fields: [userId], references: [id], onDelete: Cascade)

  type        RewardType
  amount      Int          // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ LAUNCH –≤ –æ–±—ã—á–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö
  status      RewardStatus @default(PENDING)

  projectId   String?      // –°–≤—è–∑—å —Å –ø—Ä–æ–µ–∫—Ç–æ–º (–¥–ª—è TOKEN_REVIEW)
  commentId   String?      // –°–≤—è–∑—å —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
  txHash      String?      // –•—ç—à —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã–ø–ª–∞—Ç—ã

  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  @@index([userId])
  @@index([status])
  @@map("reward_events")
}

enum RewardType {
  TOKEN_REVIEW      // –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–∑—ã–≤ –Ω–∞ —Ç–æ–∫–µ–Ω
  SCAM_REPORT       // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π —Ä–µ–ø–æ—Ä—Ç —Å–∫–∞–º–∞
  PROJECT_UPDATE    // –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
  DAILY_ACTIVITY    // –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
}

enum RewardStatus {
  PENDING    // –û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
  APPROVED   // –û–¥–æ–±—Ä–µ–Ω–∞
  PAID       // –í—ã–ø–ª–∞—á–µ–Ω–∞
  REJECTED   // –û—Ç–∫–ª–æ–Ω–µ–Ω–∞
}

// –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è governance
model Proposal {
  id          String         @id @default(cuid())
  authorId    String
  author      User           @relation(fields: [authorId], references: [id])

  title       String
  description String         @db.Text
  type        ProposalType
  projectId   String?        // –î–ª—è FEATURE_PROJECT / DELIST_PROJECT

  quorum      Int            @default(1000)  // –ú–∏–Ω–∏–º—É–º –≥–æ–ª–æ—Å–æ–≤ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  threshold   Int            @default(51)    // –ü—Ä–æ—Ü–µ–Ω—Ç –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è

  startDate   DateTime       @default(now())
  endDate     DateTime       // –ö–æ–≥–¥–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ

  status      ProposalStatus @default(ACTIVE)
  votesFor    Int            @default(0)
  votesAgainst Int           @default(0)

  votes       Vote[]

  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt

  @@index([status])
  @@index([endDate])
  @@map("proposals")
}

enum ProposalType {
  FEATURE_PROJECT   // –í—ã–¥–µ–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
  DELIST_PROJECT    // –°–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –ª–∏—Å—Ç–∏–Ω–≥–∞
  PLATFORM_CHANGE   // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  COMMUNITY_PICK    // –í—ã–±–æ—Ä —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
}

enum ProposalStatus {
  ACTIVE      // –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∏–¥—ë—Ç
  PASSED      // –ü—Ä–∏–Ω—è—Ç–æ
  REJECTED    // –û—Ç–∫–ª–æ–Ω–µ–Ω–æ
  EXECUTED    // –ò—Å–ø–æ–ª–Ω–µ–Ω–æ
  EXPIRED     // –ò—Å—Ç–µ–∫–ª–æ –±–µ–∑ –∫–≤–æ—Ä—É–º–∞
}

// –ì–æ–ª–æ—Å–∞
model Vote {
  id          String   @id @default(cuid())
  proposalId  String
  proposal    Proposal @relation(fields: [proposalId], references: [id], onDelete: Cascade)
  userId      String
  user        User     @relation(fields: [userId], references: [id])

  inFavor     Boolean  // –ó–∞ –∏–ª–∏ –ø—Ä–æ—Ç–∏–≤
  votingPower Int      // –°–∏–ª–∞ –≥–æ–ª–æ—Å–∞ (lock_amount √ó tier_multiplier)

  createdAt   DateTime @default(now())

  @@unique([proposalId, userId])
  @@index([proposalId])
  @@map("votes")
}

// –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ challenge –¥–ª—è –∫–æ—à–µ–ª—å–∫–æ–≤
model WalletVerification {
  id              String   @id @default(cuid())
  walletAddress   String   @unique
  code            String   // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
  expiresAt       DateTime
  createdAt       DateTime @default(now())

  // –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ ‚Äî –∫–æ—à–µ–ª—ë–∫ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
  userId          String

  @@index([walletAddress])
  @@index([code])
  @@map("wallet_verifications")
}
